# Shared defaults
# Local container credentials (used by docker-compose)
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=escapehatch
KC_BOOTSTRAP_ADMIN_USERNAME=admin
KC_BOOTSTRAP_ADMIN_PASSWORD=admin

NEXT_PUBLIC_CONTROL_PLANE_URL=http://localhost:4000
APP_BASE_URL=http://localhost:4000
WEB_BASE_URL=http://localhost:3000

# Control-plane persistence
DATABASE_URL=postgres://postgres:postgres@localhost:5432/escapehatch
SESSION_SECRET=replace-me
SESSION_TTL_SECONDS=3600
RATE_LIMIT_PER_MINUTE=240
LOG_FILE_PATH=

# Local bootstrap/dev auth
DEV_AUTH_BYPASS=true
SETUP_BOOTSTRAP_ENABLED=true
SETUP_BOOTSTRAP_TOKEN=replace-with-a-long-random-token

# Discord OIDC (primary provider)
OIDC_DISCORD_CLIENT_ID=
OIDC_DISCORD_CLIENT_SECRET=
OIDC_DISCORD_AUTHORIZE_URL=https://discord.com/api/oauth2/authorize
OIDC_DISCORD_TOKEN_URL=https://discord.com/api/oauth2/token
OIDC_DISCORD_USERINFO_URL=https://discord.com/api/users/@me

# Google OIDC (optional)
OIDC_GOOGLE_CLIENT_ID=
OIDC_GOOGLE_CLIENT_SECRET=
OIDC_GOOGLE_AUTHORIZE_URL=https://accounts.google.com/o/oauth2/v2/auth
OIDC_GOOGLE_TOKEN_URL=https://oauth2.googleapis.com/token
OIDC_GOOGLE_USERINFO_URL=https://openidconnect.googleapis.com/v1/userinfo

# Twitch OIDC (optional)
OIDC_TWITCH_CLIENT_ID=
OIDC_TWITCH_CLIENT_SECRET=
OIDC_TWITCH_AUTHORIZE_URL=https://id.twitch.tv/oauth2/authorize
OIDC_TWITCH_TOKEN_URL=https://id.twitch.tv/oauth2/token
OIDC_TWITCH_USERINFO_URL=https://api.twitch.tv/helix/users

# Optional Keycloak broker (future expansion)
OIDC_KEYCLOAK_ISSUER=http://localhost:8080/realms/escapehatch
OIDC_KEYCLOAK_CLIENT_ID=escapehatch-web
OIDC_KEYCLOAK_CLIENT_SECRET=

# Synapse provisioning
SYNAPSE_BASE_URL=http://localhost:8008
SYNAPSE_ACCESS_TOKEN=
SYNAPSE_STRICT_PROVISIONING=false

# Federation policy defaults
FEDERATION_DEFAULT_ALLOWLIST=localhost,127.0.0.1

# Voice token hardening
SFU_TOKEN_TTL_SECONDS=300

# Discord bridge OAuth
DISCORD_BRIDGE_MOCK=true
DISCORD_BRIDGE_CLIENT_ID=
DISCORD_BRIDGE_CLIENT_SECRET=
DISCORD_BRIDGE_AUTHORIZE_URL=https://discord.com/api/oauth2/authorize
DISCORD_BRIDGE_TOKEN_URL=https://discord.com/api/oauth2/token
DISCORD_BRIDGE_USERINFO_URL=https://discord.com/api/users/@me
DISCORD_BRIDGE_USER_GUILDS_URL=https://discord.com/api/users/@me/guilds
DISCORD_BRIDGE_CALLBACK_URL=http://localhost:4000/v1/discord/oauth/callback
